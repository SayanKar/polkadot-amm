(this.webpackJsonpamm=this.webpackJsonpamm||[]).push([[0],{351:function(e,t){},353:function(e,t){},363:function(e,t){},365:function(e,t){},392:function(e,t){},394:function(e,t){},395:function(e,t){},400:function(e,t){},402:function(e,t){},408:function(e,t){},410:function(e,t){},429:function(e,t){},441:function(e,t){},444:function(e,t){},447:function(e,t){},449:function(e,t){},458:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a(259),r=a.n(c),s=(a(62),a(10)),o=a.n(s),i=a(18),u=a(1),l=1e6,d=/^[0-9]*[.]?[0-9]{0,6}$/,m="wss://ws.jupiter-poa.patract.cn/",p="5CUq8TpEVXKcgoB75fZQzjcFN7ZExyJGSZEEwYApUhRtGygK",v={source:{hash:"0x5d1618c769b7c6fbd47eaba1e43e2a8485c6c2c04461cbaa81991c2eeb24f827",language:"ink! 3.0.0-rc6",compiler:"rustc 1.58.0-nightly"},contract:{name:"polkadot-amm",version:"0.1.0",authors:["Nimish Agrawal realnimish@gmail.com"]},V1:{spec:{constructors:[{args:[{name:"_fees",type:{displayName:["Balance"],type:0}}],docs:["Constructs a new AMM instance","@param _fees: valid interval -> [0,1000)"],name:["new"],selector:"0x9bae9d5e"}],docs:[],events:[],messages:[{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}},{name:"_amountToken2",type:{displayName:["Balance"],type:0}}],docs:[" Sends free token(s) to the invoker"],mutates:!0,name:["faucet"],payable:!1,returnType:null,selector:"0x91bd0a53"},{args:[],docs:[" Returns the balance of the user"],mutates:!1,name:["getMyHoldings"],payable:!1,returnType:{displayName:[],type:9},selector:"0x4646fd22"},{args:[],docs:[" Returns the amount of tokens locked in the pool,total shares issued & trading fee param"],mutates:!1,name:["getPoolDetails"],payable:!1,returnType:{displayName:[],type:10},selector:"0xc1d33772"},{args:[{name:"_amountToken2",type:{displayName:["Balance"],type:0}}],docs:[" Returns amount of Token1 required when providing liquidity with _amountToken2 quantity of Token2"],mutates:!1,name:["getEquivalentToken1Estimate"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x3814b1f7"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}}],docs:[" Returns amount of Token2 required when providing liquidity with _amountToken1 quantity of Token1"],mutates:!1,name:["getEquivalentToken2Estimate"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x5a431238"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}},{name:"_amountToken2",type:{displayName:["Balance"],type:0}}],docs:[" Adding new liquidity in the pool"," Returns the amount of share issued for locking given assets"],mutates:!0,name:["provide"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x3f1420fd"},{args:[{name:"_share",type:{displayName:["Balance"],type:0}}],docs:[" Returns the estimate of Token1 & Token2 that will be released on burning given _share"],mutates:!1,name:["getWithdrawEstimate"],payable:!1,returnType:{displayName:["Result"],type:13},selector:"0x4d684150"},{args:[{name:"_share",type:{displayName:["Balance"],type:0}}],docs:[" Removes liquidity from the pool and releases corresponding Token1 & Token2 to the withdrawer"],mutates:!0,name:["withdraw"],payable:!1,returnType:{displayName:["Result"],type:13},selector:"0x410fcc9d"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}}],docs:[" Returns the amount of Token2 that the user will get when swapping a given amount of Token1 for Token2"],mutates:!1,name:["getSwapToken1EstimateGivenToken1"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x6bc9f484"},{args:[{name:"_amountToken2",type:{displayName:["Balance"],type:0}}],docs:[" Returns the amount of Token1 that the user should swap to get _amountToken2 in return"],mutates:!1,name:["getSwapToken1EstimateGivenToken2"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x397bf950"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}},{name:"_minToken2",type:{displayName:["Balance"],type:0}}],docs:[" Swaps given amount of Token1 to Token2 using algorithmic price determination"," Swap fails if Token2 amount is less than _minToken2"],mutates:!0,name:["swapToken1GivenToken1"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x8adf0584"},{args:[{name:"_amountToken2",type:{displayName:["Balance"],type:0}},{name:"_maxToken1",type:{displayName:["Balance"],type:0}}],docs:[" Swaps given amount of Token1 to Token2 using algorithmic price determination"," Swap fails if amount of Token1 required to obtain _amountToken2 exceeds _maxToken1"],mutates:!0,name:["swapToken1GivenToken2"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x3f4171b1"},{args:[{name:"_amountToken2",type:{displayName:["Balance"],type:0}}],docs:[" Returns the amount of Token2 that the user will get when swapping a given amount of Token1 for Token2"],mutates:!1,name:["getSwapToken2EstimateGivenToken2"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0xee312671"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}}],docs:[" Returns the amount of Token2 that the user should swap to get _amountToken1 in return"],mutates:!1,name:["getSwapToken2EstimateGivenToken1"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0xe20b04d7"},{args:[{name:"_amountToken2",type:{displayName:["Balance"],type:0}},{name:"_minToken1",type:{displayName:["Balance"],type:0}}],docs:[" Swaps given amount of Token2 to Token1 using algorithmic price determination"," Swap fails if Token1 amount is less than _minToken1"],mutates:!0,name:["swapToken2GivenToken2"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0xa28d3f0a"},{args:[{name:"_amountToken1",type:{displayName:["Balance"],type:0}},{name:"_maxToken2",type:{displayName:["Balance"],type:0}}],docs:[" Swaps given amount of Token2 to Token1 using algorithmic price determination"," Swap fails if amount of Token2 required to obtain _amountToken1 exceeds _maxToken2"],mutates:!0,name:["swapToken2GivenToken1"],payable:!1,returnType:{displayName:["Result"],type:11},selector:"0x1ccb6598"}]},storage:{struct:{fields:[{layout:{cell:{key:"0x0000000000000000000000000000000000000000000000000000000000000000",ty:0}},name:"totalShares"},{layout:{cell:{key:"0x0100000000000000000000000000000000000000000000000000000000000000",ty:0}},name:"totalToken1"},{layout:{cell:{key:"0x0200000000000000000000000000000000000000000000000000000000000000",ty:0}},name:"totalToken2"},{layout:{struct:{fields:[{layout:{struct:{fields:[{layout:{cell:{key:"0x0300000000000000000000000000000000000000000000000000000000000000",ty:1}},name:"header"},{layout:{struct:{fields:[{layout:{cell:{key:"0x0400000000000000000000000000000000000000000000000000000000000000",ty:2}},name:"len"},{layout:{array:{cellsPerElem:1,layout:{cell:{key:"0x0400000001000000000000000000000000000000000000000000000000000000",ty:3}},len:4294967295,offset:"0x0500000000000000000000000000000000000000000000000000000000000000"}},name:"elems"}]}},name:"entries"}]}},name:"keys"},{layout:{hash:{layout:{cell:{key:"0x0500000001000000000000000000000000000000000000000000000000000000",ty:8}},offset:"0x0400000001000000000000000000000000000000000000000000000000000000",strategy:{hasher:"Blake2x256",postfix:"",prefix:"0x696e6b20686173686d6170"}}},name:"values"}]}},name:"shares"},{layout:{struct:{fields:[{layout:{struct:{fields:[{layout:{cell:{key:"0x0500000001000000000000000000000000000000000000000000000000000000",ty:1}},name:"header"},{layout:{struct:{fields:[{layout:{cell:{key:"0x0600000001000000000000000000000000000000000000000000000000000000",ty:2}},name:"len"},{layout:{array:{cellsPerElem:1,layout:{cell:{key:"0x0600000002000000000000000000000000000000000000000000000000000000",ty:3}},len:4294967295,offset:"0x0700000001000000000000000000000000000000000000000000000000000000"}},name:"elems"}]}},name:"entries"}]}},name:"keys"},{layout:{hash:{layout:{cell:{key:"0x0700000002000000000000000000000000000000000000000000000000000000",ty:8}},offset:"0x0600000002000000000000000000000000000000000000000000000000000000",strategy:{hasher:"Blake2x256",postfix:"",prefix:"0x696e6b20686173686d6170"}}},name:"values"}]}},name:"token1Balance"},{layout:{struct:{fields:[{layout:{struct:{fields:[{layout:{cell:{key:"0x0700000002000000000000000000000000000000000000000000000000000000",ty:1}},name:"header"},{layout:{struct:{fields:[{layout:{cell:{key:"0x0800000002000000000000000000000000000000000000000000000000000000",ty:2}},name:"len"},{layout:{array:{cellsPerElem:1,layout:{cell:{key:"0x0800000003000000000000000000000000000000000000000000000000000000",ty:3}},len:4294967295,offset:"0x0900000002000000000000000000000000000000000000000000000000000000"}},name:"elems"}]}},name:"entries"}]}},name:"keys"},{layout:{hash:{layout:{cell:{key:"0x0900000003000000000000000000000000000000000000000000000000000000",ty:8}},offset:"0x0800000003000000000000000000000000000000000000000000000000000000",strategy:{hasher:"Blake2x256",postfix:"",prefix:"0x696e6b20686173686d6170"}}},name:"values"}]}},name:"token2Balance"},{layout:{cell:{key:"0x0900000003000000000000000000000000000000000000000000000000000000",ty:0}},name:"fees"}]}},types:[{id:0,type:{def:{primitive:"u128"}}},{id:1,type:{def:{composite:{fields:[{name:"last_vacant",type:2,typeName:"Index"},{name:"len",type:2,typeName:"u32"},{name:"len_entries",type:2,typeName:"u32"}]}},path:["ink_storage","collections","stash","Header"]}},{id:2,type:{def:{primitive:"u32"}}},{id:3,type:{def:{variant:{variants:[{fields:[{type:7,typeName:"VacantEntry"}],index:0,name:"Vacant"},{fields:[{type:4,typeName:"T"}],index:1,name:"Occupied"}]}},params:[{name:"T",type:4}],path:["ink_storage","collections","stash","Entry"]}},{id:4,type:{def:{composite:{fields:[{type:5,typeName:"[u8; 32]"}]}},path:["ink_env","types","AccountId"]}},{id:5,type:{def:{array:{len:32,type:6}}}},{id:6,type:{def:{primitive:"u8"}}},{id:7,type:{def:{composite:{fields:[{name:"next",type:2,typeName:"Index"},{name:"prev",type:2,typeName:"Index"}]}},path:["ink_storage","collections","stash","VacantEntry"]}},{id:8,type:{def:{composite:{fields:[{name:"value",type:0,typeName:"V"},{name:"key_index",type:2,typeName:"KeyIndex"}]}},params:[{name:"V",type:0}],path:["ink_storage","collections","hashmap","ValueEntry"]}},{id:9,type:{def:{tuple:[0,0,0]}}},{id:10,type:{def:{tuple:[0,0,0,0]}}},{id:11,type:{def:{variant:{variants:[{fields:[{type:0}],index:0,name:"Ok"},{fields:[{type:12}],index:1,name:"Err"}]}},params:[{name:"T",type:0},{name:"E",type:12}],path:["Result"]}},{id:12,type:{def:{variant:{variants:[{index:0,name:"ZeroLiquidity"},{index:1,name:"ZeroAmount"},{index:2,name:"InsufficientAmount"},{index:3,name:"NonEquivalentValue"},{index:4,name:"ThresholdNotReached"},{index:5,name:"InvalidShare"},{index:6,name:"InsufficientLiquidity"},{index:7,name:"SlippageExceeded"}]}},path:["amm","amm","Error"]}},{id:13,type:{def:{variant:{variants:[{fields:[{type:14}],index:0,name:"Ok"},{fields:[{type:12}],index:1,name:"Err"}]}},params:[{name:"T",type:14},{name:"E",type:12}],path:["Result"]}},{id:14,type:{def:{tuple:[0,0]}}}]}},f=a(11),b=a(65),h=a(8);function x(e){return Object(h.jsx)("div",{className:"boxTemplate",children:Object(h.jsxs)("div",{className:"boxBody",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{className:"leftHeader",children:[" ",e.leftHeader," "]}),Object(h.jsx)("input",{className:"textField",value:e.value,onChange:function(t){return function(t){(""===t.target.value||d.test(t.target.value))&&e.onChange(t)}(t)},placeholder:"Enter amount"})]}),Object(h.jsxs)("div",{className:"rightContent",children:[e.showBalance&&Object(h.jsxs)("div",{className:"rightTopBalance",children:["BALANCE : ",Object(h.jsx)("b",{children:e.balance})]}),Object(h.jsx)("div",{className:"rightCenter",children:e.right})]})]})})}function j(e){var t=Object(n.useState)(["KAR","KOTHI"]),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(0),d=Object(u.a)(s,2),m=d[0],p=d[1],v=Object(n.useState)(0),j=Object(u.a)(v,2),y=j[0],g=j[1],O=Object(n.useState)(.5),k=Object(u.a)(O,2),N=k[0],T=k[1],w=function(){var t=Object(i.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(a)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract||!(null===e||void 0===e||null===(n=e.activeAccount)||void 0===n?void 0:n.address)){t.next=17;break}if(t.prev=3,"KAR"!==c[0]){t.next=9;break}return t.next=7,e.contract.query.getSwapToken1EstimateGivenToken1(e.activeAccount.address,{value:0,gasLimit:-1},a*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):g(e.Ok.replace(/,/g,"")/l)}));case 7:t.next=11;break;case 9:return t.next=11,e.contract.query.getSwapToken2EstimateGivenToken2(e.activeAccount.address,{value:0,gasLimit:-1},a*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):g(e.Ok.replace(/,/g,"")/l)}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),alert(t.t0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(i.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(a)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract||!(null===e||void 0===e||null===(n=e.activeAccount)||void 0===n?void 0:n.address)){t.next=17;break}if(t.prev=3,"KAR"!==c[0]){t.next=9;break}return t.next=7,e.contract.query.getSwapToken1EstimateGivenToken2(e.activeAccount.address,{value:0,gasLimit:-1},a*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):p(e.Ok.replace(/,/g,"")/l)}));case 7:t.next=11;break;case 9:return t.next=11,e.contract.query.getSwapToken2EstimateGivenToken1(e.activeAccount.address,{value:0,gasLimit:-1},a*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):p(e.Ok.replace(/,/g,"")/l)}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),alert(t.t0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(m)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(null!==e.contract&&(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=8;break}return alert("Connect your wallet"),t.abrupt("return");case 8:if(t.prev=8,"KAR"!==c[0]){t.next=14;break}return t.next=12,e.contract.query.swapToken1GivenToken1(e.activeAccount.address,{value:0,gasLimit:-1},m*l,y*(100-N)/100*l).then((function(e){var t,a;if(null===(t=e.result.toHuman().Err)||void 0===t||null===(a=t.Module)||void 0===a?void 0:a.message)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.Err){t.next=8;break}return t.next=3,e.contract.tx.swapToken1GivenToken1({value:0,gasLimit:-1},m*l,y*(100-N)/100*l).signAndSend(e.activeAccount.address,{signer:e.signer},function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.isFinalized){t.next=4;break}return t.next=3,e.getHoldings();case 3:alert("Tx successful");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:p(0),g(0),alert("Tx submitted"),t.next=10;break;case 8:console.log(a.Err),alert(a.Err);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:t.next=16;break;case 14:return t.next=16,e.contract.query.swapToken2GivenToken2(e.activeAccount.address,{value:0,gasLimit:-1},m*l,y*(100-N)/100*l).then((function(e){var t,a;if(null===(t=e.result.toHuman().Err)||void 0===t||null===(a=t.Module)||void 0===a?void 0:a.message)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.Err){t.next=8;break}return t.next=3,e.contract.tx.swapToken2GivenToken2({value:0,gasLimit:-1},m*l,y*(100-N)/100*l).signAndSend(e.activeAccount.address,{signer:e.signer},function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.isFinalized){t.next=4;break}return t.next=3,e.getHoldings();case 3:alert("Tx successful");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:p(0),g(0),alert("Tx submitted"),t.next=10;break;case 8:console.log(a.Err),alert(a.Err);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(8),alert(t.t0),console.log("Couldn't swap :- ",t.t0);case 22:case"end":return t.stop()}}),t,null,[[8,18]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"tabBody",children:[Object(h.jsx)("div",{className:"tabHeader",children:"Swap"}),Object(h.jsx)(x,{leftHeader:"From",right:Object(h.jsx)("div",{className:"coinWrapper",children:c[0]}),value:m,showBalance:!0,balance:e.holding["amountOfKAR".includes(c[0])?"amountOfKAR":"amountOfKOTHI"],onChange:function(e){return p((t=e).target.value),void w(t.target.value);var t}}),Object(h.jsx)("div",{className:"alignCenter",onClick:function(){return r(Object(f.a)(c.reverse())),void w(m)},children:Object(h.jsx)("div",{className:"tabIcon middleIcon",tabIndex:0,children:Object(h.jsx)(b.d,{className:"swapIcon"})})}),Object(h.jsx)(x,{leftHeader:"To",right:Object(h.jsx)("div",{className:"coinWrapper",children:c[1]}),value:y,showBalance:!0,balance:e.holding["amountOfKAR".includes(c[1])?"amountOfKAR":"amountOfKOTHI"],onChange:function(e){return g((t=e).target.value),void A(t.target.value);var t}}),Object(h.jsxs)("div",{className:"selectTolerance",children:[Object(h.jsx)("div",{className:"toleranceHeading",children:"SLIPPAGE TOLERANCE"}),Object(h.jsx)("div",{className:"toleranceValues",children:[.5,1,2,5].map((function(e){return Object(h.jsx)("div",{className:"toleranceCard "+(N===e?"selectedTolerance":""),onClick:function(){return function(e){e!==N&&T(e)}(e)},children:e+"%"})}))})]}),Object(h.jsxs)("div",{className:"transactionFee",children:["TRADING FEE(",e.holding.tradingFees+"%","): ",Object(h.jsx)("b",{children:.01*m+" "+c[0]})]}),Object(h.jsxs)("div",{className:"transactionFee",children:["MINIMUM ",c[1]," YOU RECIEVE:"," ",Object(h.jsx)("b",{children:y*(100-N)/100})]}),Object(h.jsx)("div",{className:"bottomDiv",children:Object(h.jsx)("div",{className:"btn",onClick:function(){return E()},children:"Swap"})})]})}function y(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(0),d=Object(u.a)(s,2),m=d[0],p=d[1],v=Object(n.useState)(""),f=Object(u.a)(v,2),j=f[0],y=f[1],g=function(){var t=Object(i.a)(o.a.mark((function t(a,n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(n)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract||!(null===e||void 0===e||null===(c=e.activeAccount)||void 0===c?void 0:c.address)){t.next=17;break}if(t.prev=3,"KAR"!==a){t.next=9;break}return t.next=7,e.contract.query.getEquivalentToken2Estimate(e.activeAccount.address,{value:0,gasLimit:-1},n*l).then((function(e){return e.output.toHuman()})).then((function(e){console.log(e),e.Err?e.Err.includes("ZeroLiquidity")?y("Message: Empty pool. Set the initial conversion rate."):(alert(e.Err),console.log(e.Err)):p(e.Ok.replace(/,/g,"")/l)}));case 7:t.next=11;break;case 9:return t.next=11,e.contract.query.getEquivalentToken1Estimate(e.activeAccount.address,{value:0,gasLimit:-1},n*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?e.Err.includes("ZeroLiquidity")?y("Message: Empty pool. Set the initial conversion rate."):(alert(e.Err),console.log(e.Err)):r(e.Ok.replace(/,/g,"")/l)}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),alert(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,a){return t.apply(this,arguments)}}(),O=function(){var t=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(c)&&!["","."].includes(m)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(null!==e.contract&&(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=8;break}return alert("Connect your wallet"),t.abrupt("return");case 8:return t.prev=8,t.next=11,e.contract.query.provide(e.activeAccount.address,{value:0,gasLimit:-1},c*l,m*l).then((function(e){var t,a;if(null===(t=e.result.toHuman().Err)||void 0===t||null===(a=t.Module)||void 0===a?void 0:a.message)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.Err){t.next=15;break}return t.prev=1,t.next=4,e.contract.tx.provide({value:0,gasLimit:-1},c*l,m*l).signAndSend(e.activeAccount.address,{signer:e.signer},function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.isFinalized){t.next=5;break}return t.next=3,e.getHoldings();case 3:alert("Tx successful"),y("");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:r(0),p(0),alert("Tx submitted"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0),console.log(t.t0);case 13:t.next=17;break;case 15:console.log(a.Err),alert(a.Err);case 17:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}());case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(8),alert(t.t0),console.log("Couldn't provide :- ",t.t0);case 17:case"end":return t.stop()}}),t,null,[[8,13]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"tabBody",children:[Object(h.jsx)("div",{className:"tabHeader",children:"Provide"}),Object(h.jsx)(x,{leftHeader:"Amount of KAR",value:c,showBalance:!0,balance:e.holding.amountOfKAR,onChange:function(e){return function(e){r(e.target.value),g("KAR",e.target.value)}(e)}}),Object(h.jsx)("div",{className:"alignCenter",children:Object(h.jsx)("div",{className:"tabIcon middleIcon",tabIndex:0,children:Object(h.jsx)(b.a,{className:"plusIcon"})})}),Object(h.jsx)(x,{leftHeader:"Amount of KOTHI",value:m,showBalance:!0,balance:e.holding.amountOfKOTHI,onChange:function(e){return function(e){p(e.target.value),g("KOTHI",e.target.value)}(e)}}),Object(h.jsx)("div",{className:"error",children:j}),Object(h.jsx)("div",{className:"bottomDiv",children:Object(h.jsx)("div",{className:"btn",onClick:function(){return O()},children:"Provide"})})]})}function g(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),m=d[0],p=d[1],v=function(){var t=Object(i.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(a.target.value),["","."].includes(a.target.value)||null===e.contract||!(null===e||void 0===e||null===(n=e.activeAccount)||void 0===n?void 0:n.address)){t.next=11;break}return t.prev=2,t.next=5,e.contract.query.getWithdrawEstimate(e.activeAccount.address,{value:0,gasLimit:-1},a.target.value*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):p([e.Ok[0].replace(/,/g,"")/l,e.Ok[1].replace(/,/g,"")/l])}));case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),alert(t.t0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.contract||!(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=6;break}return r(e.maxShare),t.next=4,e.contract.query.getWithdrawEstimate(e.activeAccount.address,{value:0,gasLimit:-1},e.maxShare*l).then((function(e){return e.output.toHuman()})).then((function(e){e.Err?(console.log(e.Err),alert(e.Err)):p([e.Ok[0].replace(/,/g,"")/l,e.Ok[1].replace(/,/g,"")/l])}));case 4:t.next=7;break;case 6:alert("Connect your wallet");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(c)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(null!==e.contract&&(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=8;break}return alert("Connect your wallet"),t.abrupt("return");case 8:if(!(e.maxShare<c)){t.next=11;break}return alert("Amount should be less than your max share"),t.abrupt("return");case 11:return t.prev=11,t.next=14,e.contract.query.withdraw(e.activeAccount.address,{value:0,gasLimit:-1},c*l).then((function(e){var t,a;if(null===(t=e.result.toHuman().Err)||void 0===t||null===(a=t.Module)||void 0===a?void 0:a.message)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.Err){t.next=6;break}return t.next=3,e.contract.tx.withdraw({value:0,gasLimit:-1},c*l).signAndSend(e.activeAccount.address,{signer:e.signer},function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.isFinalized){t.next=6;break}return t.next=3,e.getHoldings();case 3:r(0),p([]),alert("Tx successful");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:alert("Tx submitted"),t.next=8;break;case 6:console.log(a.Err),alert(a.Err);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(11),alert(t.t0),console.log("Couldn't withdraw :- ",t.t0);case 20:case"end":return t.stop()}}),t,null,[[11,16]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"tabBody",children:[Object(h.jsx)("div",{className:"tabHeader",children:"Withdraw"}),Object(h.jsx)(x,{leftHeader:"Amount:",right:Object(h.jsx)("div",{onClick:function(){return f()},className:"getMax",children:"Max"}),value:c,onChange:function(e){return v(e)}}),m.length>0&&Object(h.jsxs)("div",{className:"withdrawEstimate",children:[Object(h.jsxs)("div",{className:"amount",children:["Amount of Kar: ",m[0]]}),Object(h.jsxs)("div",{className:"amount",children:["Amount of Kothi: ",m[1]]})]}),Object(h.jsx)("div",{className:"bottomDiv",children:Object(h.jsx)("div",{className:"btn",onClick:function(){return b()},children:"Withdraw"})})]})}function O(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(0),d=Object(u.a)(s,2),m=d[0],p=d[1];function v(){return v=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.contract&&(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=3;break}return alert("Connect your wallet"),t.abrupt("return");case 3:if(!["","."].includes(c)&&!["","."].includes(m)){t.next=6;break}return alert("Amount should be a valid number"),t.abrupt("return");case 6:return t.prev=6,t.next=9,e.contract.tx.faucet({value:0,gasLimit:-1},c*l,m*l).signAndSend(e.activeAccount.address,{signer:e.signer},function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.isFinalized){t.next=4;break}return t.next=3,e.getHoldings();case 3:alert("Tx successful");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:alert("Tx submitted"),r(0),p(0),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),alert(t.t0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,14]])}))),v.apply(this,arguments)}return Object(h.jsxs)("div",{className:"tabBody",children:[Object(h.jsx)("div",{className:"tabHeader",children:"Faucet"}),Object(h.jsx)(x,{leftHeader:"Amount of KAR",right:Object(h.jsx)("div",{className:"coinWrapper",children:"KAR"}),value:c,onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(h.jsx)(x,{leftHeader:"Amount of KOTHI",right:Object(h.jsx)("div",{className:"coinWrapper",children:"KOTHI"}),value:m,onChange:function(e){return function(e){p(e.target.value)}(e)}}),Object(h.jsx)("div",{className:"bottomDiv",children:Object(h.jsx)("div",{className:"btn",onClick:function(){return function(){return v.apply(this,arguments)}()},children:"Fund"})})]})}var k=a(116),N=a(117);function T(e){var t,a=Object(n.useState)(e.activeAccount?"AccountDetail":"SelectAccount"),c=Object(u.a)(a,2),r=c[0],s=c[1],l=Object(n.useState)([]),d=Object(u.a)(l,2),m=d[0],p=d[1],v=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(t),"SelectAccount"!==t){e.next=4;break}return e.next=4,f();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.b)("Local Canvas");case 3:if(0!==e.sent.length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Object(N.a)().then((function(e){return p(e)}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Failed to fetch accounts"),console.log("Extension setup failed",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f()}),[]);return Object(h.jsxs)("div",{className:"tabBody",children:["AccountDetail"===r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"tabHeader",children:"Account"}),(null===e||void 0===e||null===(t=e.activeAccount)||void 0===t?void 0:t.address)&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"accountDetail",children:[Object(h.jsx)("div",{className:"accountdetailIcon",children:Object(h.jsx)("div",{className:"circle",children:Object(h.jsx)(k.a,{value:e.activeAccount.address,size:32,theme:"polkadot"})})}),Object(h.jsxs)("div",{className:"accountDetailsText",children:[Object(h.jsx)("div",{className:"accountDetailHeader",children:e.activeAccount.meta.name}),Object(h.jsx)("div",{className:"accountDetailAddress",children:e.activeAccount.address})]}),Object(h.jsx)("div",{className:"changeActiveAccountIcon",onClick:function(){return v("SelectAccount")},children:Object(h.jsx)(b.c,{className:"changeAccountIcon"})}),Object(h.jsx)("div",{className:"logout",onClick:function(){return s("SelectAccount"),void e.setActiveAccount()},children:Object(h.jsx)(b.b,{className:"logoutIcon"})})]}),Object(h.jsxs)("div",{className:"Assets",children:[Object(h.jsx)("div",{className:"assetsHeading",children:"Assets"}),Object(h.jsxs)("div",{className:"assetBody",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Amount of KAR"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.amountOfKAR})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Amount of KOTHI"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.amountOfKOTHI})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Amount of Share"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.amountOfShare})]})]})]}),Object(h.jsxs)("div",{className:"Assets",children:[Object(h.jsx)("div",{className:"assetsHeading",children:"Pool Details"}),Object(h.jsxs)("div",{className:"assetBody",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Total KAR"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.totalKAR})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Total KOTHI"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.totalKOTHI})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Total Share"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.totalShare})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"attributeName",children:"Trading Fee"}),Object(h.jsx)("div",{className:"attributeValue",children:e.holding.tradingFees+"%"})]})]})]})]})]}),"SelectAccount"===r&&(null===e.contract?Object(h.jsx)("div",{className:"accountConnectBtn",onClick:function(){return e.connect()},children:"Connect your wallet"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"tabHeader",children:"Select Account"}),Object(h.jsx)("div",{className:"miniText",children:" Select an account to work with"}),m&&m.map((function(t){return Object(h.jsxs)("div",{className:"accountWrapper",onClick:function(){return function(t){e.setActiveAccount(t),s("AccountDetail")}(t)},children:[Object(h.jsx)(k.a,{className:"accounticon",value:t.address,size:32,theme:"polkadot"}),Object(h.jsxs)("div",{className:"accountTextSection",children:[Object(h.jsx)("div",{className:"accountDetailHeader",children:t.meta.name}),Object(h.jsx)("div",{className:"accountDetailAddress",children:t.address})]})]})}))]}))]})}var w=a(139),A=a(103);function E(e){var t=e.selectedTab,a=e.setActiveTab,c=Object(n.useState)(0),r=Object(u.a)(c,2),s=r[0],d=r[1],m=Object(n.useState)(0),p=Object(u.a)(m,2),v=p[0],f=p[1],x=Object(n.useState)(0),k=Object(u.a)(x,2),N=k[0],E=k[1],S=Object(n.useState)(0),H=Object(u.a)(S,2),R=H[0],I=H[1],C=Object(n.useState)(0),B=Object(u.a)(C,2),K=B[0],_=B[1],q=Object(n.useState)(0),L=Object(u.a)(q,2),F=L[0],M=L[1],G=Object(n.useState)(0),V=Object(u.a)(G,2),D=V[0],W=V[1];function P(){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.contract&&(null===e||void 0===e||null===(a=e.activeAccount)||void 0===a?void 0:a.address)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.contract.query.getMyHoldings(e.activeAccount.address,{value:0,gasLimit:-1}).then((function(e){if(e.result.toHuman().Err)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then((function(e){d(e[0].replace(/,/g,"")/l),f(e[1].replace(/,/g,"")/l),E(e[2].replace(/,/g,"")/l)})).catch((function(e){console.log("Couldn't fetch asset details :-",e),alert(e)}));case 5:return t.next=7,e.contract.query.getPoolDetails(e.activeAccount.address,{value:0,gasLimit:-1}).then((function(e){if(e.result.toHuman().Err)throw new Error(e.result.toHuman().Err.Module.message);return e.output.toHuman()})).then((function(e){I(e[0].replace(/,/g,"")/l),_(e[1].replace(/,/g,"")/l),M(e[2].replace(/,/g,"")/l),W(e[3].replace(/,/g,"")/10)})).catch((function(e){console.log("Couldn't fetch pool details :-",e)}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("Couldn't Fetch holdings",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}Object(n.useEffect)((function(){P()}));var Z=[{name:"Swap",icon:Object(h.jsx)(b.d,{className:"swapIcon"})},{name:"Provide",icon:Object(h.jsx)(w.b,{className:"provideIcon"})},{name:"Withdraw",icon:Object(h.jsx)(A.b,{className:"withdrawIcon"})},{name:"Faucet",icon:Object(h.jsx)(A.a,{className:"faucetIcon"})},{name:"Account",icon:Object(h.jsx)(A.c,{className:"accountIcon"})}];return Object(h.jsxs)("div",{className:"centerBody",children:[Object(h.jsx)("div",{className:"selectTab",children:Z.map((function(e){return Object(h.jsxs)("div",{tabIndex:0,className:"tabStyle "+(t===e.name?"activeTab":""),onClick:function(){return function(e){a(e)}(e.name)},children:[Object(h.jsx)("div",{className:t===e.name?"activeTabIcon":"tabIcon ",children:e.icon}),Object(h.jsx)("div",{className:"tabName "+(t===e.name?"activeTabName":""),children:e.name})]})}))}),Object(h.jsxs)("div",{className:"centerContainer",children:["Swap"===t&&Object(h.jsx)(j,{contract:e.contract,getHoldings:function(){return P()},activeAccount:e.activeAccount,signer:e.signer,holding:{amountOfKAR:s,amountOfKOTHI:v,tradingFees:D}}),"Provide"===t&&Object(h.jsx)(y,{contract:e.contract,getHoldings:function(){return P()},activeAccount:e.activeAccount,signer:e.signer,holding:{amountOfKAR:s,amountOfKOTHI:v}}),"Withdraw"===t&&Object(h.jsx)(g,{contract:e.contract,maxShare:N,getHoldings:function(){return P()},activeAccount:e.activeAccount,signer:e.signer}),"Faucet"===t&&Object(h.jsx)(O,{contract:e.contract,getHoldings:function(){return P()},activeAccount:e.activeAccount,signer:e.signer}),"Account"===t&&Object(h.jsx)(T,{contract:e.contract,getHoldings:function(){return P()},activeAccount:e.activeAccount,signer:e.signer,setActiveAccount:e.setActiveAccount,connect:function(){return e.connect()},holding:{amountOfKAR:s,amountOfKOTHI:v,amountOfShare:N,totalShare:F,totalKAR:R,totalKOTHI:K,tradingFees:D}})]})]})}var S=a(499),H=a(495),R=a(498);function I(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),s=Object(u.a)(r,2),l=s[0],d=s[1],f=Object(n.useState)(null),b=Object(u.a)(f,2),x=b[0],j=b[1],y=Object(n.useState)("Swap"),g=Object(u.a)(y,2),O=g[0],T=g[1];function I(){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("----- Connect called -----"),t=new S.a(m),e.next=5,H.a.create({provider:t});case 5:a=e.sent,n=new R.a(a,v,p),c(n),T("Account"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Couldn't connect to wallet :- ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=l,!e.t0){e.next=7;break}return e.t1=j,e.next=5,Object(N.c)(l.meta.source).then((function(e){return e.signer}));case 5:e.t2=e.sent,(0,e.t1)(e.t2);case 7:case"end":return e.stop()}}),e)})))()}),[l]),Object(h.jsxs)("div",{className:"pageBody",children:[Object(h.jsxs)("div",{className:"navBar",children:[Object(h.jsxs)("div",{className:"appName",children:[" ","AMM ",Object(h.jsx)(w.a,{className:"appnameIcon"})]}),null===a||null==l?Object(h.jsxs)("div",{className:"connectBtn",onClick:function(){return I()},children:[Object(h.jsx)(A.c,{className:"accountIcon"}),Object(h.jsx)("div",{className:"connectWalletText",children:"Connect your wallet"})]}):Object(h.jsxs)("div",{className:"connected",children:[Object(h.jsx)(k.a,{value:l.address,size:32,theme:"polkadot"}),Object(h.jsx)("div",{className:"connectedAccountName",children:l.meta.name})]})]}),Object(h.jsx)(E,{contract:a,selectedTab:O,connect:function(){return I()},activeAccount:l,signer:x,setActiveAccount:function(e){return d(e)},setActiveTab:function(e){return T(e)}})]})}r.a.render(Object(h.jsx)(I,{}),document.getElementById("root"))},62:function(e,t,a){}},[[458,1,2]]]);
//# sourceMappingURL=main.a2e83197.chunk.js.map